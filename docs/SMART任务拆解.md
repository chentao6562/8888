# SMART 任务拆解文档

## 一、业务逻辑梳理（以项目为中心）

### 核心业务流程
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           公司业务全流程                                      │
│                   公域流量 → 私域转化 → 成交变现                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  项目    │───→│  账号    │───→│  内容    │───→│  线索    │───→│  客户    │
│ Project  │    │ Account  │    │ Content  │    │  Lead    │    │ Customer │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
     │               │               │               │               │
     │               │               │               │               │
     ▼               ▼               ▼               ▼               ▼
 项目目标        账号运营         流量数据         线索转化         订单成交
 指标管理        平台矩阵         互动分析         漏斗分析         回款管理
```

### 数据层级关系
```
项目 (Project)
├── 账号 (Account)                    # 一个项目下有多个平台账号
│   ├── 抖音账号1
│   ├── 抖音账号2
│   ├── 快手账号1
│   └── 小红书账号1
│
├── 内容/流量 (TrafficData)           # 每个账号下的内容数据
│   ├── 视频1: 播放234, 点赞12, 评论0...
│   ├── 视频2: 播放14, 点赞0, 评论0...
│   └── ...
│
├── 线索 (Lead)                       # 从流量转化来的线索
│   ├── 线索1: 私信咨询 → 跟进中
│   ├── 线索2: 已加微信 → 待成交
│   └── ...
│
├── 客户 (Customer)                   # 已成交的客户
│   └── 客户1: 成交金额xxx
│
└── 订单 (Order)                      # 成交订单
    └── 订单1: 金额xxx, 已回款xxx
```

---

## 二、CSV 数据字段映射

### 你的CSV数据结构
| 序号 | CSV字段 | 系统字段 | 说明 |
|------|---------|----------|------|
| 0 | 账号 | accountName | 平台账号名称 |
| 1 | 备注 | accountRemark | 账号备注（可用于关联项目） |
| 2 | 平台 | platform | 抖音/快手/小红书/视频号 |
| 3 | 标题 | contentTitle | 视频标题（含话题标签） |
| 4 | 类型 | contentType | 视频/图文 |
| 5 | 推荐 | recommends | 推荐量（--表示无数据） |
| 6 | 阅读（播放） | views | 播放量 |
| 7 | 评论 | comments | 评论数 |
| 8 | 分享 | shares | 分享数 |
| 9 | 收藏 | saves | 收藏数 |
| 10 | 点赞 | likes | 点赞数 |
| 11 | 发布时间 | publishTime | 发布时间 |
| 12 | 链接 | contentUrl | 视频链接 |

### 数据导入逻辑
```
CSV文件 → 解析 → 匹配/创建账号 → 关联项目 → 写入流量数据
                      ↓
              根据"备注"或"账号名称"
              匹配系统中已有的Account
```

---

## 三、SMART 任务拆解

### 阶段一：数据基础设施（优先级：P0）

#### Task 1.1: 完善账号管理
- **S(Specific)**: 实现账号的CRUD，支持按项目筛选
- **M(Measurable)**: 账号列表页可正常增删改查
- **A(Achievable)**: 后端API已有基础，前端页面需完善
- **R(Relevant)**: 账号是流量数据归属的关键实体
- **T(Time-bound)**: 2小时

**具体任务**:
1. 后端：账号API添加按项目筛选
2. 前端：账号管理页面完善表单
3. 数据库：确保Account表有projectId字段

#### Task 1.2: 实现CSV数据导入
- **S(Specific)**: 支持导入你提供的CSV格式，自动匹配账号
- **M(Measurable)**: 导入成功率达到95%以上
- **A(Achievable)**: 已分析CSV结构，可实现
- **R(Relevant)**: 数据导入是看板的数据来源
- **T(Time-bound)**: 3小时

**具体任务**:
1. 后端：实现GBK编码CSV解析
2. 后端：账号自动匹配/创建逻辑
3. 后端：导入记录保存
4. 前端：上传界面+导入历史

#### Task 1.3: 流量数据展示
- **S(Specific)**: 流量看板展示各维度统计数据
- **M(Measurable)**: 能展示播放/点赞/评论等核心指标
- **A(Achievable)**: 数据模型已定义
- **R(Relevant)**: 看板是业务决策的核心
- **T(Time-bound)**: 3小时

**具体任务**:
1. 后端：聚合统计API（按账号/平台/时间）
2. 前端：统计卡片+趋势图表
3. 前端：支持项目/账号/日期筛选

---

### 阶段二：销售转化链路（优先级：P1）

#### Task 2.1: 线索管理完善
- **S(Specific)**: 线索从创建到转化的全流程管理
- **M(Measurable)**: 漏斗转化率可视化
- **A(Achievable)**: 后端基础已实现
- **R(Relevant)**: 线索是流量到成交的桥梁
- **T(Time-bound)**: 2小时

**具体任务**:
1. 前端：线索列表+状态流转
2. 前端：跟进记录功能
3. 前端：漏斗统计图表

#### Task 2.2: 客户管理
- **S(Specific)**: 已成交客户的精细化管理
- **M(Measurable)**: 客户画像完整度达到80%
- **A(Achievable)**: 后端待实现
- **R(Relevant)**: 客户是最终价值承载
- **T(Time-bound)**: 3小时

**具体任务**:
1. 后端：客户CRUD + 标签系统
2. 前端：客户列表+详情页
3. 前端：跟进记录+成交历史

#### Task 2.3: 订单与回款
- **S(Specific)**: 订单创建、回款登记、佣金计算
- **M(Measurable)**: 回款率统计准确
- **A(Achievable)**: 后端待实现
- **R(Relevant)**: 订单是业绩衡量的核心
- **T(Time-bound)**: 3小时

**具体任务**:
1. 后端：订单CRUD + 回款记录
2. 前端：订单列表+回款登记
3. 前端：业绩统计面板

---

### 阶段三：指标与任务管理（优先级：P2）

#### Task 3.1: SMART指标体系
- **S(Specific)**: 为项目设定SMART指标，跟踪完成情况
- **M(Measurable)**: 指标完成率可量化
- **A(Achievable)**: 数据模型已有Indicator表
- **R(Relevant)**: 指标是目标管理的抓手
- **T(Time-bound)**: 2小时

**具体任务**:
1. 前端：指标设定表单（四象限分类）
2. 前端：指标完成进度展示
3. 前端：指标看板（项目维度）

#### Task 3.2: 任务管理
- **S(Specific)**: 项目下的任务分配与跟踪
- **M(Measurable)**: 任务完成率统计
- **A(Achievable)**: 后端待实现
- **R(Relevant)**: 任务是执行层面的管理
- **T(Time-bound)**: 3小时

**具体任务**:
1. 后端：任务CRUD + 子任务
2. 前端：任务列表+状态管理
3. 前端：我的待办面板

---

### 阶段四：分析与报告（优先级：P3）

#### Task 4.1: 工作台Dashboard
- **S(Specific)**: 聚合展示核心业务数据
- **M(Measurable)**: 数据实时准确
- **A(Achievable)**: 后端API待实现
- **R(Relevant)**: 工作台是日常使用入口
- **T(Time-bound)**: 2小时

#### Task 4.2: AI分析能力（预留）
- **S(Specific)**: 接入AI对流量/线索进行智能分析
- **M(Measurable)**: 分析建议可操作
- **A(Achievable)**: 预留接口
- **R(Relevant)**: AI是系统的增值能力
- **T(Time-bound)**: 待定

---

## 四、系统菜单结构（以项目为中心）

```
工作台 (Dashboard)
├── 今日概览
├── 我的待办
├── 我的线索
└── 快捷入口

项目管理 (Projects)
├── 项目列表          # 所有项目的入口
├── 账号管理          # 项目下的平台账号
├── 视频管理          # 账号下的内容数据（从CSV导入）
├── 流量看板          # 流量数据的可视化分析
├── 线索管理          # 从流量转化的线索
├── 客户管理          # 已成交的客户
└── 订单管理          # 成交的订单记录

任务管理 (Tasks)
├── 所有任务
├── 我的任务
└── 已完成

财务管理 (Finance)
├── 支出管理
└── 预算管理

工作报告 (Reports)
├── 日报
├── 周报
└── 月报

系统设置 (Settings)
├── 用户管理
├── 公告管理
└── 官网管理
```

---

## 五、立即执行的任务清单

### 本次开发任务（按优先级）

| 序号 | 任务 | 优先级 | 预估时间 | 状态 |
|------|------|--------|----------|------|
| 1 | CSV数据导入功能（支持你的格式） | P0 | 3小时 | 待开发 |
| 2 | 流量看板完善（聚合统计） | P0 | 2小时 | 待开发 |
| 3 | 账号-项目关联完善 | P0 | 1小时 | 待开发 |
| 4 | 线索管理前端完善 | P1 | 2小时 | 待开发 |
| 5 | 客户管理模块 | P1 | 3小时 | 待开发 |
| 6 | 订单管理模块 | P1 | 3小时 | 待开发 |
| 7 | 工作台Dashboard | P2 | 2小时 | 待开发 |
| 8 | 任务管理模块 | P2 | 3小时 | 待开发 |

### 下一步行动
1. **立即**：实现CSV导入功能，支持你提供的数据格式
2. **然后**：完善流量看板，展示导入的数据
3. **接着**：打通线索→客户→订单的转化链路

---

## 六、数据库调整建议

### 需要确认的字段
当前数据库的TrafficData表需要调整以匹配CSV：

```sql
-- 建议的字段映射
ALTER TABLE TrafficData ADD COLUMN contentType VARCHAR(20); -- 视频/图文
ALTER TABLE TrafficData ADD COLUMN recommends INT;          -- 推荐量
ALTER TABLE TrafficData ADD COLUMN saves INT;               -- 收藏数
ALTER TABLE TrafficData ADD COLUMN contentUrl TEXT;         -- 内容链接
```

### Account表关联
确保Account表有备注字段，用于CSV导入时的匹配：
```sql
ALTER TABLE Account ADD COLUMN remark VARCHAR(255);  -- 用于CSV匹配
```
